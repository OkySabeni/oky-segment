<!DOCTYPE html> 
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
	<!-- OptimizelyX Code -->
	<script src="//cdn.optimizely.com/json/11085953018.json"></script>
	<script> 
		var optimizelyClientInstance;
		var url = 'https://cdn.optimizely.com/json/12345.json';
		window.fetch(url, { mode: 'cors' })
		  .then((response) => response.json())
		  .then((datafile) => {
		  optimizelyClientInstance = optimizely.createInstance({ datafile: datafile })
		  });
		
		var anonId = analytics.user().anonymousId();
		var variation1 = optimizelyClientInstance.activate('QuestTest', anonId);
	</script>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Questionnaire</title> 
        <meta name="keywords" content="" />
        <meta name="description" content="" />
        <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900|Quicksand:400,700|Questrial" rel="stylesheet" />
        <link href="default.css" rel="stylesheet" type="text/css" media="all" />
        <link href="fonts.css" rel="stylesheet" type="text/css" media="all" />

    </head> 
    <body>
        <div id="header-wrapper">
            <div id="header" class="container">
                <div id="logo">
                    <h2><a href="#">What is your favorite place to travel?</a></h2>
                </div>
            </div>
        </div>
        <div id="page-wrapper">
            <div id="welcome" class="container">
                <form name="travel" class="form label" onsubmit="identify(event)">
                    What is your favorite travel destination?
                    <input name="destination" class="form input.text" required="" size="81" type="text"/> 
                    <br><br><br> 
                    Any recommendations (cool things to do, places to visit or restaurants to eat)? 
                    <br><br> 
                    <textarea cols="20" name="details" required="" rows="10">
                    </textarea> 
                    <br><br> 
                    Name: <input name="fullname" required="" size="75" type="text"/> 
                    <br><br> 
                    Email: <input name="email" required="" size="75" type="email"/> 
                    <br><br>
                    <input name="submit" class="button button-small" type="submit" value="submit"/>
                    <br><br>
                    <button class="button button-small" onclick="myFunction()">Click me</button>
                </form>
		<br><br>
		<form name="travel2" class="form label" onsubmit="track(event)">
			Name: <input name="name" required="" size="75" type="text"/> 
                    	<br><br> 
                    	Age: <input name="age" required="" size="75" type="number"/> 
                    	<br><br>
			Gender: <input name="gender" required="" size="75" type="text"/> 
                    	<br><br>
                	<input name="submit" class="button button-small" type="submit" value="submit"/>
		</form>
		    <button class="button button-small" onclick="myFunction2()">Identify People</button>
            </div>
        </div>
	<script type="text/javascript">
    		function identify(e){
        		e.preventDefault();
        		var form = e.target;
        		var email = form["email"].value;
        		var fullname = form["fullname"].value;
        		var destination = form["destination"].value;
        		var details = form["details"].value;
        		var user = {
            			email: email,
            			name: fullname,
            			destination: destination,
            			details: details
        		};

        		analytics.identify(1233456, {
            			email: email, 
            			name: fullname
        		}, {
            			'integrations': {
                		'Salesforce': true,
                		'Klaviyo': true
            			}
			});

        		analytics.track('Destination Submitted', user, function() {
            			window.location.href = "";
        		});
    		}
		
		function track(e){
        		e.preventDefault();
        		var form = e.target;
        		var name = form["name"].value;
        		var age = form["age"].value;
        		var gender = form["gender"].value;
        		var user = {
            			name: name,
            			age: age,
            			gender: gender
        		};

        		analytics.identify(13444, {
            			firstName: "Jason", 
				lastName: "Martin",
				gender: gender
			});

        		analytics.track('Signed Up', user, function() {
            			window.location.href = "";
        		});
    		}
    
    		function myFunction() {
        		analytics.track('Button Clicked', {
            			title: "Tester"
    			});
		}
		
    		function myFunction2() {
        		
			analytics.identify(123, {
            			firstName: "Jason", 
				gender: "m",
				age: 21
			});
			
			analytics.track('Experiment Viewed', {
  				experimentId: '11093495055',
  				variationId: '11081844660',
  				nonInteraction: 1
			});
			
		}
	</script>   
</body> 
</html>
